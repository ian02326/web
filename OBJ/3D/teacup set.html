<!DOCTYPE html>
<html lang="en">

<head>
	<title>fabric cup sleeve</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link type="text/css" rel="stylesheet" href="main.css">
	<link rel="icon" href="image/smalllogo.ico" type="image/x-icon" />
</head>

<body>
	<div id="info">
		<div id="credits">Credits<br /></div>
		<div id="modelinfo">Modelname: fabric cup sleeve<br />&copy;</div>
		<div id="instructions">Use mousebuttons to navigate</div>
	</div>

	<script type="module">
		import * as THREE from './build/three.module.js';
		import { OrbitControls } from './modules/jsm/controls/OrbitControls.js';
		import { GLTFLoader } from './modules/jsm/loaders/GLTFLoader.js';
		import { DDSLoader } from './modules/jsm/loaders/DDSLoader.js';
		import { DRACOLoader } from './modules/jsm/loaders/DRACOLoader.js';

		var container, stats, controls;
		var camera, scene, renderer, envmapfile;

		init();
		animate();

		function init() {
			//置入html
			container = document.createElement('div');
			document.body.appendChild(container);

			// 設定攝影機
			camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.25, 1000);
			camera.position.set(0, 0, 5);

			scene = new THREE.Scene();
			scene.background = new THREE.Color(0xf3f3f3);
			envmapfile = '';


			// model
			var loader = new GLTFLoader().setPath('./');
			DRACOLoader.setDecoderPath('./draco/gltf/');
			loader.setDRACOLoader(new DRACOLoader());
			loader.setDDSLoader(new DDSLoader());
			loader.load('teacup set.glb', function (gltf) {
				scene.add(gltf.scene);

				var hemiLight = new THREE.HemisphereLight(0xffffff, 0x999999, 1);
				hemiLight.position.set(0, 50, 0);
				scene.add(hemiLight);

				var dirLight = new THREE.DirectionalLight(0xffffff, 0.6);
				dirLight.position.set(-10, 50, 0);

				scene.add(dirLight);
			});


			// 渲染
			renderer = new THREE.WebGLRenderer({ antialias: true });
			renderer.setPixelRatio(window.devicePixelRatio);
			renderer.setSize(window.innerWidth, window.innerHeight);
			renderer.gammaOutput = true;
			container.appendChild(renderer.domElement);

			renderer.shadowMap.enabled = true;
			renderer.shadowMap.type = THREE.PCFSoftShadowMap;

			// 攝影機控制
			controls = new OrbitControls(camera, renderer.domElement); //類似軌道種中的衛星，控制滑鼠和鍵盤在場景中遊走
			controls.minDistance = 3;
			controls.maxDistance = 50;
			controls.enableDamping = true;
			controls.update();
		}

		function animate() {
			requestAnimationFrame(animate);
			renderer.render(scene, camera);
		}

	</script>

</body>

</html>